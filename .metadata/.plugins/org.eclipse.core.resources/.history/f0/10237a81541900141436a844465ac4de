package com.songbase.fm.androidapp.buffering.online;

import java.net.URLEncoder;
import java.util.Date;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import android.util.Log;

import com.songbase.fm.androidapp.buffering.Vid2mp3Converter;
import com.songbase.fm.androidapp.misc.HttpController;

public class Convert2mp3netConverter implements Vid2mp3Converter {


	
	
	

	@Override
	public String bufferSong() {
		
		String html = "";
		
		try {
			
			
			
			String urlParameters = "url="+URLEncoder.encode("https://www.youtube.com/watch?v=SMiVJ4mmbQM")+"&format=mp3&quality=1&85tvb5=43450768";
		    html = HttpController.instance.sendPost("http://convert2mp3.net/index.php?p=convert",urlParameters,"convert2mp3.net");

		    
         //   Utils.log(html);
            
		    
		    
            Pattern pattern = Pattern.compile("convert\\((.*?)\\)");
            Matcher matcher = pattern.matcher(html);
            if (matcher.find()) {
            	
            	
            	String parameters = matcher.group(1).replace("\"","");
            	
            	String[] parameter = parameters.split(",");
            	
            	
            	
            	
            	
                Log.w("XXXXXXXXXXXXXXXXXX",parameter[0]);
                Log.w("XXXXXXXXXXXXXXXXXX",parameter[1]);
                Log.w("XXXXXXXXXXXXXXXXXX",parameter[2]);
                Log.w("XXXXXXXXXXXXXXXXXX",parameter[3]);

                
                
            }
            
            
            
            
            //TODO EXTRACT 
            String id;
            String key;
            String cs;
            String time = String.valueOf(new Date().getTime());
            
            
            
            
            
            
            
			
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		
        return html;

		
	}
	
	
	
	
	
	
	
	

}
